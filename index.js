import{a as C,i as u,S as T,N as j,P as H,A as F,I as O}from"./assets/vendor-Cw2x0rFR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const P="/categories",E="/furnitures",v=8,G="https://furniture-store.b.goit.study/api";async function L(e,t={}){try{const{page:r=1,limit:o=v,...s}=t;return(await C(`${G}${e}`,{params:{page:r,limit:o,...s}})).data}catch{u.error({title:"",message:"Помилка виконання запиту. Спробуйте ще раз.",position:"topRight",timeout:2e3,close:!1,maxWidth:300,messageColor:"#fff",color:"#e23232"})}}const a={orderModalBackdrop:document.querySelector(".order-modal-overlay"),orderModal:document.querySelector(".order-modal"),orderModalCloseBtn:document.querySelector(".modal-close"),orderFormEl:document.querySelector(".order-form"),orderModalLoader:document.querySelector(".loader"),categoriesGallery:document.querySelector(".furniture-categories-list"),furnitureGallery:document.querySelector(".furniture-gallery"),showMoreBtn:document.querySelector(".show-more-button"),loader:document.getElementById("loader")};function D(){a.orderModalBackdrop.classList.add("is-open"),document.body.style.overflow="hidden"}function p(){a.orderModalBackdrop.classList.remove("is-open"),document.body.style.overflow="",a.orderFormEl.reset()}const N={"66504a50a1b2c3d4e5f6a7b8":"Soft_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7b9":"Storage_systems_2x.jpg","66504a50a1b2c3d4e5f6a7ba":"Beds_2x.jpg","66504a50a1b2c3d4e5f6a7bb":"Tables_2x.jpg","66504a50a1b2c3d4e5f6a7bc":"Chairs_2x.jpg","66504a50a1b2c3d4e5f6a7bd":"Citchens_2x.jpg","66504a50a1b2c3d4e5f6a7be":"Children_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7bf":"Ofice_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c0":"Corridor_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c1":"Bathroom_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c2":"Garden_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c3":"Accessuars_2x.jpg"};let l=1,g=1,y="",f=!1,m=[];function R(e){const t=`
        <li class="category-item">
            <div class="category-thumb all-categories-thumb" data-category-id="">
                <p class="category-title">Всі товари</p>
            </div>
        </li>
    `,r=e.map(({_id:o,name:s})=>{const i=`./img/${N[o]}`;return`<li class="category-item"><div class="category-thumb" data-category-id="${o}" style="background-image: url('${i}')" >
 <p class="category-title">${s}</p>
                </div>
            </li>`}).join("");a.categoriesGallery.insertAdjacentHTML("beforeend",t+r)}function k(e){return e.map(({name:t,color:r,price:o,images:s,_id:i})=>{const d=s[0]||"/img/All_products_2x.jpg",n=Array.isArray(r)?r.map(c=>`<span class="color-circle" style="background-color: ${c};"></span>`).join(""):`<span class="color-circle" style="background-color: ${r};"></span>`;return`
            <li class="gallery-item">
                <img class="gallery-img" src="${d}" alt="${t}" />
                <h3 class="furniture-title">${t}</h3>
                <div class="furniture-colors">${n}</div>
                <p class="furniture-price">${o} грн</p>
                <div class="wrapper">
                    <button class="details-btn" type="button" data-id="${i}">Детальніше</button>
                </div>
            </li>`}).join("")}async function V(){try{l=1,f=!0,a.showMoreBtn.classList.add("visually-hidden"),B();const e=await L(E,M(l));a.furnitureGallery.innerHTML=k(e.furnitures),m.length=0,m.push(...e.furnitures),g=Math.ceil((e.totalItems??0)/v),g>l&&a.showMoreBtn.classList.remove("visually-hidden")}catch(e){alert("Помилка завантаження меблів:",e.message)}finally{S(),f=!1}}async function U(){if(!f){if(l>=g){a.showMoreBtn.classList.add("visually-hidden");return}f=!0,a.showMoreBtn.disabled=!0,B();try{const e=l+1,t=await L(E,M(e));a.furnitureGallery.insertAdjacentHTML("beforeend",k(t.furnitures)),m.push(...t.furnitures),l=e,l>=g&&a.showMoreBtn.classList.add("visually-hidden")}catch(e){alert("Помилка при завантаженні наступної сторінки:",e.message)}finally{S(),a.showMoreBtn.disabled=!1,f=!1}}}function M(e){const t={page:e,limit:v};return y&&(t.category=y),t}async function Z(e){const t=e.target.closest(".category-thumb");if(!t)return;const r=t.dataset.categoryId??"";r===y&&l===1||(document.querySelectorAll(".category-thumb.active").forEach(o=>o.classList.remove("active")),t.classList.add("active"),y=r,await W())}async function W(){try{l=1,a.showMoreBtn.classList.add("visually-hidden"),a.furnitureGallery.innerHTML="",B();const e=await L(E,M(l));a.furnitureGallery.innerHTML=k(e.furnitures),m.length=0,m.push(...e.furnitures),g=Math.ceil((e.totalItems??0)/v)||(e.totalPages??1),g>1&&a.showMoreBtn.classList.remove("visually-hidden")}catch(e){alert("Помилка перезавантаження першої сторінки:",e.message)}finally{S()}}function B(){var e,t;(e=a.loader)==null||e.classList.remove("hidden"),(t=a.loader)==null||t.setAttribute("aria-hidden","false")}function S(){var e,t;(e=a.loader)==null||e.classList.add("hidden"),(t=a.loader)==null||t.setAttribute("aria-hidden","true")}L(P,{page:1,limit:100}).then(e=>{R(e),a.categoriesGallery.addEventListener("click",Z)}).catch(e=>{alert(e.message)});V().catch(e=>{alert(e.message)});a.showMoreBtn.addEventListener("click",U);document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("burger"),t=document.getElementById("mobileMenu"),r=document.getElementById("closeMenu"),o=document.body,s=document.querySelector(".menu-toggle-buttons"),i=(n=!0)=>{t.classList.toggle("active",n),o.classList.toggle("menu-open",n),n?(e.style.display="none",r.style.display="flex"):(e.style.display="flex",r.style.display="none")};e==null||e.addEventListener("click",()=>i(!0)),r==null||r.addEventListener("click",()=>i(!1)),document.addEventListener("click",n=>{const c=t.contains(n.target),b=s.contains(n.target);t.classList.contains("active")&&!c&&!b&&i(!1)}),document.addEventListener("keydown",n=>{n.key==="Escape"&&(t!=null&&t.classList.contains("active"))&&i(!1)}),document.querySelectorAll(".mobile-nav-link, .mobile-cta-button").forEach(n=>{n.addEventListener("click",()=>i(!1))}),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",c=>{c.preventDefault();const b=n.getAttribute("href").substring(1),w=document.getElementById(b);w==null||w.scrollIntoView({behavior:"smooth",block:"start"})})}),[document.getElementById("logo"),document.getElementById("mobileLogo")].forEach(n=>{n==null||n.addEventListener("click",c=>{c.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})})});const I="data:image/svg+xml,%3csvg%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.57075%201.47649C9.91449%200.612003%2011.0853%200.612004%2011.429%201.47649L13.4578%206.57884C13.6028%206.94328%2013.9304%207.19229%2014.3065%207.22384L19.5726%207.66545C20.4648%207.74027%2020.8266%208.90496%2020.1468%209.51407L16.1347%2013.1091C15.8481%2013.3659%2015.7229%2013.7688%2015.8104%2014.1527L17.0362%2019.528C17.2439%2020.4387%2016.2968%2021.1586%2015.5329%2020.6706L11.0244%2017.79C10.7024%2017.5842%2010.2974%2017.5842%209.97535%2017.79L5.46685%2020.6706C4.70297%2021.1586%203.75581%2020.4387%203.96349%2019.528L5.18928%2014.1527C5.27684%2013.7688%205.15168%2013.3659%204.86511%2013.1091L0.85291%209.51407C0.173129%208.90496%200.534915%207.74027%201.42714%207.66545L6.69322%207.22384C7.06936%207.19229%207.39702%206.94328%207.54193%206.57884L9.57075%201.47649Z'%20fill='%23080C09'/%3e%3c/svg%3e",$="data:image/svg+xml,%3csvg%20width='21'%20height='21'%20viewBox='0%200%2021%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M20.3928%208.27026L20.4725%208.53341C20.5381%208.73203%2020.4829%208.95278%2020.3329%209.0913L15.4863%2013.4597L16.9223%2020.007C16.9709%2020.2162%2016.8963%2020.4359%2016.7328%2020.5649L16.5134%2020.7228C16.4282%2020.7933%2016.3225%2020.8304%2016.2143%2020.828C16.1229%2020.83%2016.033%2020.8044%2015.955%2020.7543L10.5%2017.2491L5.07494%2020.7543C4.99694%2020.8044%204.90697%2020.83%204.81565%2020.828C4.7074%2020.8304%204.60169%2020.7933%204.51648%2020.7228L4.26716%2020.5649C4.10366%2020.4359%204.02906%2020.2162%204.07768%2020.007L5.51373%2013.4597L0.677039%209.10183C0.519309%208.96412%200.459604%208.73725%200.527451%208.53341L0.637149%208.27026C0.695477%208.06228%200.870839%207.91505%201.07594%207.90184L7.44841%207.36501L9.89169%201.16508C9.96998%200.959183%2010.1602%200.825329%2010.3704%200.828242H10.6296C10.8379%200.823577%2011.0261%200.958817%2011.0983%201.16508L13.5815%207.36501L19.954%207.90184C20.1591%207.91505%2020.3344%208.06228%2020.3928%208.27026ZM14.6087%2017.7333L13.4918%2012.8071L17.1517%209.51235L12.3549%209.11235L10.5%204.41767V15.0912L14.6087%2017.7333Z'%20fill='%23080C09'/%3e%3c/svg%3e",q="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.51603%2014.323L5.02603%2020.775C4.97989%2020.9704%204.99374%2021.1751%205.06577%2021.3625C5.1378%2021.5499%205.26467%2021.7112%205.4298%2021.8253C5.59492%2021.9395%205.79064%2022.0012%205.99138%2022.0024C6.19212%2022.0036%206.38855%2021.9442%206.55503%2021.832L12%2018.202L17.445%2021.832C17.6154%2021.9451%2017.8162%2022.0033%2018.0207%2021.9988C18.2251%2021.9944%2018.4232%2021.9274%2018.5884%2021.8069C18.7536%2021.6865%2018.878%2021.5183%2018.9448%2021.3251C19.0116%2021.1318%2019.0176%2020.9228%2018.962%2020.726L17.133%2014.326L21.669%2010.244C21.8143%2010.1132%2021.9181%209.94266%2021.9674%209.75351C22.0168%209.56436%2022.0097%209.36488%2021.9469%209.17974C21.8841%208.99461%2021.7685%208.83193%2021.6142%208.71183C21.46%208.59173%2021.2739%208.51947%2021.079%208.504L15.378%208.05L12.911%202.589C12.8324%202.41316%2012.7045%202.26384%2012.5428%202.15906C12.3812%202.05429%2012.1927%201.99854%2012%201.99854C11.8074%201.99854%2011.6189%202.05429%2011.4572%202.15906C11.2956%202.26384%2011.1677%202.41316%2011.089%202.589L8.62203%208.05L2.92103%208.503C2.72948%208.51818%202.54636%208.58821%202.39358%208.70473C2.2408%208.82125%202.12482%208.97932%202.05952%209.16003C1.99422%209.34074%201.98236%209.53644%202.02537%209.72371C2.06838%209.91098%202.16443%2010.0819%202.30203%2010.216L6.51603%2014.323ZM9.36903%209.997C9.54752%209.98294%209.71895%209.92112%209.86533%209.81802C10.0117%209.71491%2010.1277%209.57433%2010.201%209.411L12%205.43L13.799%209.411C13.8724%209.57433%2013.9883%209.71491%2014.1347%209.81802C14.2811%209.92112%2014.4525%209.98294%2014.631%209.997L18.603%2010.312L15.332%2013.256C15.048%2013.512%2014.935%2013.906%2015.039%2014.274L16.292%2018.659L12.556%2016.168C12.392%2016.0579%2012.199%2015.9992%2012.0015%2015.9992C11.804%2015.9992%2011.611%2016.0579%2011.447%2016.168L7.54303%2018.771L8.59303%2014.225C8.63153%2014.0578%208.62636%2013.8835%208.57802%2013.7189C8.52969%2013.5543%208.43981%2013.4048%208.31703%2013.285L5.27903%2010.323L9.36903%209.997Z'%20fill='%23080C09'/%3e%3c/svg%3e";class z{constructor(){this.swiper=null,this.feedbacks=[],this.init()}init(){this.loadFeedbacks()}async loadFeedbacks(){try{this.showLoading();const t=await C.get("https://furniture-store.b.goit.study/api/feedbacks",{params:{limit:10,page:1}});this.feedbacks=t.data.feedbacks,this.renderFeedbacks(),this.initSwiper()}catch(t){console.error("Помилка завантаження відгуків:",t),this.showError()}}showLoading(){const t=document.querySelector(".swiper-wrapper");t.innerHTML='<div class="loading">Завантаження відгуків...</div>'}showError(){const t=document.querySelector(".swiper-wrapper");t.innerHTML='<div class="error">Помилка завантаження відгуків. Спробуйте пізніше.</div>'}roundRating(t){return t>=3.3&&t<=3.7?3.5:t>=3.8&&t<=4.2?4:Math.round(t*2)/2}generateStars(t){const r=this.roundRating(t);let o="";for(let s=1;s<=5;s++)s<=r?o+=`<svg class="star" width="20" height="20"><use href=${I}></use></svg>`:s-.5===r?o+=`<svg class="star" width="20" height="20"><use href=${$}></use></svg>`:o+=`<svg class="star" width="20" height="20"><use href=${q}></use></svg>`;return o}renderFeedbacks(){const t=document.querySelector(".swiper-wrapper"),r=this.feedbacks.map(o=>`
            <div class="swiper-slide">
                <div class="feedback-card">
                    <div class="star-rating">
                        ${this.generateStars(o.rate)}
                    </div>
                    <div class="feedback-text">"${o.descr}"</div>
                    <div class="feedback-author">${o.name}</div>
                </div>
            </div>
        `).join("");t.innerHTML=r}initSwiper(){const t=document.getElementById("prevBtn"),r=document.getElementById("nextBtn");this.swiper=new T(".feedback-swiper",{modules:[j,H],slidesPerView:1,slidesPerGroup:1,spaceBetween:0,loop:!1,grabCursor:!0,pagination:{el:".feedback-pagination",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},navigation:{nextEl:r,prevEl:t},breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1024:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}},on:{slideChange:()=>{this.updateNavigationButtons()},reachBeginning:()=>{this.updateNavigationButtons()},reachEnd:()=>{this.updateNavigationButtons()}}}),this.updateNavigationButtons()}updateNavigationButtons(){const t=document.getElementById("prevBtn"),r=document.getElementById("nextBtn");this.swiper.isBeginning?(t.classList.add("disabled"),t.setAttribute("disabled","true")):(t.classList.remove("disabled"),t.removeAttribute("disabled")),this.swiper.isEnd?(r.classList.add("disabled"),r.setAttribute("disabled","true")):(r.classList.remove("disabled"),r.removeAttribute("disabled"))}}document.addEventListener("DOMContentLoaded",()=>{new z});new F(".accordion-container",{duration:250,showMultiple:!1});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("current-year");if(e){const t=new Date().getFullYear();e.textContent=t}});const Y="https://furniture-store.b.goit.study/api";async function K(e){console.log(e);try{return(await C.post(`${Y}/orders`,e,{headers:{"Content-Type":"application/json"}})).data}catch{u.error({message:"Сталася помилка, спробуйте ще раз",position:"topRight"})}}function Q(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function J(e){const t=Q(e);let r="";for(let o=1;o<=5;o++)o<=t?r+=`<svg class="star" width="16" height="16"><use href=${I} width="16" height="16"></use></svg>`:o-.5===t?r+=`<svg class="star" width="16" height="16"><use href=${$} width="16" height="16"></use></svg>`:r+=`<svg class="star" width="16" height="16"><use href=${q} width="16" height="16"></use></svg>`;return r}document.addEventListener("click",e=>{const t=e.target.closest(".details-btn");if(!t)return;const r=t.dataset.id,o=m.find(s=>s._id===r);o&&X(o)});let x={id:"",color:""};function X(e){x.id=e._id;const t=document.querySelector("[data-modal]"),r=e.images.map((s,i)=>`
    <li class="${i===0?"large":"small"}">
      <img class="gallery-images" src="${s}" alt="${e.name}-${i+1}">
    </li>
  `).join("");t.querySelector(".gallery-details").innerHTML=r,t.querySelector(".details-title").textContent=e.name,t.querySelector(".details-category").textContent=e.category.name,t.querySelector(".details-price").innerHTML=`${e.price} <span class="price-currency">грн</span>`,document.querySelector("#rating").innerHTML=J(e.rate);const o=e.color.map((s,i)=>`
    <li>
      <input class="color-checkbox visually-hidden" type="checkbox" id="color${i+1}" value="${s}">
      <label class="color-label" for="color${i+1}">
        <span class="modal-checkbox" style="background-color:${s}"></span>
      </label>
    </li>
  `).join("");t.querySelector(".color-options").innerHTML=o,t.querySelector(".details-description").textContent=e.description,t.querySelector(".details-size").textContent=e.sizes,t.classList.add("is-open"),document.body.style.overflow="hidden",ee(),document.addEventListener("keydown",A),t.addEventListener("click",_),t.querySelector("[data-modal-close]").addEventListener("click",h)}function ee(){const e=document.querySelectorAll(".color-checkbox");e.forEach(t=>{t.addEventListener("change",()=>{t.checked&&e.forEach(r=>{r!==t&&(r.checked=!1)})})})}document.querySelector(".modal-order-btn").addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(".color-checkbox:checked");if(!t){u.warning({title:"Увага",message:"Оберіть, будь ласка, колір",position:"center",timeout:2e3});return}x.color=t.value,h(),D()});function h(){const e=document.querySelector("[data-modal]");e.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",A),e.removeEventListener("click",_),e.querySelector("[data-modal-close]").removeEventListener("click",h)}function _(e){e.target.hasAttribute("data-modal")&&h()}function A(e){e.key==="Escape"&&h()}const te=document.getElementById("phone-input"),re={mask:"+{38} (000) 000 00 00"};O(te,re);a.orderModalCloseBtn.addEventListener("click",p);a.orderModalBackdrop.addEventListener("click",e=>{e.target===a.orderModalBackdrop&&p()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!a.orderModalBackdrop.classList.contains("hidden")&&p()});a.orderFormEl.addEventListener("submit",e=>se(e));async function se(e,t){if(e.preventDefault(),!a.orderFormEl.checkValidity()){u.error({message:"Будь ласка, заповніть всі обов’язкові поля.",position:"topRight"});return}const{id:r,color:o}=x,s={email:a.orderFormEl.email.value.trim(),phone:a.orderFormEl.phone.value.trim().replace(/\D/g,""),modelId:r,color:o,comment:a.orderFormEl.comment.value.trim()};try{a.orderModalLoader.classList.remove("hidden"),await K(s)&&(u.success({message:"Заявку успішно надіслано!",position:"topRight"}),p())}catch{u.error({message:"Сталася помилка, спробуйте ще раз",position:"topRight"});return}finally{a.orderModalLoader.classList.add("hidden"),p()}}
//# sourceMappingURL=index.js.map
