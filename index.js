import{a as M,i as f,S as A,N as P,P as T,A as J,I as X}from"./assets/vendor-Cw2x0rFR.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const Y="/categories",x="/furnitures",C=8,ee="https://furniture-store.b.goit.study/api";async function h(e,t={}){try{const{page:n=1,limit:o=C,...r}=t;return(await M(`${ee}${e}`,{params:{page:n,limit:o,...r}})).data}catch{f.error({title:"",message:"Помилка виконання запиту. Спробуйте ще раз.",position:"topRight",timeout:2e3,close:!1,maxWidth:300,messageColor:"#fff",color:"#e23232"})}}const s={orderModalBackdrop:document.querySelector(".order-modal-overlay"),orderModal:document.querySelector(".order-modal"),orderModalCloseBtn:document.querySelector(".modal-close"),orderFormEl:document.querySelector(".order-form"),orderModalLoader:document.querySelector(".loader-modal"),categoriesGallery:document.querySelector(".furniture-categories-list"),furnitureGallery:document.querySelector(".furniture-gallery"),showMoreBtn:document.querySelector(".show-more-button"),loader:document.getElementById("loader-modal"),floader:document.querySelector(".floader")},te={"66504a50a1b2c3d4e5f6a7b8":"Soft_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7b9":"Storage_systems_2x.jpg","66504a50a1b2c3d4e5f6a7ba":"Beds_2x.jpg","66504a50a1b2c3d4e5f6a7bb":"Tables_2x.jpg","66504a50a1b2c3d4e5f6a7bc":"Chairs_2x.jpg","66504a50a1b2c3d4e5f6a7bd":"Citchens_2x.jpg","66504a50a1b2c3d4e5f6a7be":"Children_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7bf":"Ofice_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c0":"Corridor_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c1":"Bathroom_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c2":"Garden_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c3":"Accessuars_2x.jpg"};let u=1,m=1,b="",g=!1,p=[];function re(e){const t=`
        <li class="category-item">
            <div class="category-thumb all-categories-thumb active" data-category-id="">
                <p class="category-title">Всі товари</p>
            </div>
        </li>
    `,n=e.map(({_id:o,name:r})=>{const a=te[o],d=`background-image: image-set(url('./img/${a.replace("_2x","_1x")}') 1x, url('./img/${a}') 2x);`.trim();return`
            <li class="category-item">   
                <div class="category-thumb" data-category-id="${o}" style="${d}" >
                <p class="category-title">${r}</p>
                </div>
            </li>`}).join("");s.categoriesGallery.insertAdjacentHTML("beforeend",t+n)}function S(e){return e.map(({name:t,color:n,price:o,images:r,_id:a})=>{const i=r[0]||"/img/All_products_2x.jpg",d=Array.isArray(n)?n.map(c=>`<span class="color-circle" style="background-color: ${c};"></span>`).join(""):`<span class="color-circle" style="background-color: ${n};"></span>`;return`
            <li class="gallery-item">
                <img class="gallery-img" src="${i}" alt="${t}" />
                <div class="furniture-info">
                <h3 class="furniture-title">${t}</h3>
                <div class="furniture-colors">${d}</div>
                <p class="furniture-price">${o} грн</p>
                </div>
                <div class="wrapper">
                    <button class="details-btn" type="button" data-id="${a}">Детальніше</button>
                </div>
            </li>`}).join("")}async function se(){try{u=1,g=!0,s.showMoreBtn.classList.add("visually-hidden"),q();const e=await h(x,$(u));s.furnitureGallery.innerHTML=S(e.furnitures),p.length=0,p.push(...e.furnitures),m=Math.ceil((e.totalItems??0)/C),m>u&&s.showMoreBtn.classList.remove("visually-hidden")}catch(e){alert("Помилка завантаження меблів:",e.message)}finally{E(),g=!1}}async function ne(){if(!g){if(u>=m){s.showMoreBtn.classList.add("visually-hidden");return}g=!0,s.showMoreBtn.disabled=!0,q();try{const e=u+1,t=await h(x,$(e));s.furnitureGallery.insertAdjacentHTML("beforeend",S(t.furnitures)),p.push(...t.furnitures),u=e,u>=m&&s.showMoreBtn.classList.add("visually-hidden")}catch(e){alert("Помилка при завантаженні наступної сторінки:",e.message)}finally{E(),s.showMoreBtn.disabled=!1,g=!1}}}function $(e){const t={page:e,limit:C};return b&&(t.category=b),t}async function oe(e){const t=e.target.closest(".category-thumb");if(!t)return;const n=t.dataset.categoryId??"";n===b&&u===1||(document.querySelectorAll(".category-thumb.active").forEach(o=>o.classList.remove("active")),t.classList.add("active"),b=n,await ae())}async function ae(){try{u=1,s.showMoreBtn.classList.add("visually-hidden"),s.furnitureGallery.innerHTML="",q();const e=await h(x,$(u));s.furnitureGallery.innerHTML=S(e.furnitures),p.length=0,p.push(...e.furnitures),m=Math.ceil((e.totalItems??0)/C)||(e.totalPages??1),m>1&&s.showMoreBtn.classList.remove("visually-hidden")}catch(e){alert("Помилка перезавантаження першої сторінки:",e.message)}finally{E()}}function q(){var e,t;(e=s.floader)==null||e.classList.remove("hidden"),(t=s.floader)==null||t.setAttribute("aria-hidden","false")}function E(){var e,t;(e=s.floader)==null||e.classList.add("hidden"),(t=s.floader)==null||t.setAttribute("aria-hidden","true")}document.addEventListener("DOMContentLoaded",E);h(Y,{page:1,limit:100}).then(e=>{re(e),s.categoriesGallery.addEventListener("click",oe)}).catch(e=>{alert(e.message)});se().catch(e=>{alert(e.message)});s.showMoreBtn.addEventListener("click",ne);const B=document.getElementById("burger"),w=document.getElementById("mobileMenu"),k=document.getElementById("closeMenu"),ie=document.body,le=document.querySelector(".menu-toggle-buttons"),y=(e=!0)=>{w.classList.toggle("active",e),ie.classList.toggle("menu-open",e),e?(B.style.display="none",k.style.display="flex"):(B.style.display="flex",k.style.display="none")};B.addEventListener("click",()=>{y(!0),document.addEventListener("click",F),document.addEventListener("keydown",j)});k.addEventListener("click",()=>{y(!1),document.removeEventListener("keydown",j),document.removeEventListener("click",F)});document.querySelectorAll(".mobile-nav-link, .mobile-cta-button").forEach(e=>{e.addEventListener("click",()=>y(!1))});function j(e){e.key==="Escape"&&w.classList.contains("active")&&y(!1)}function F(e){const t=w.contains(e.target),n=le.contains(e.target);w.classList.contains("active")&&!t&&!n&&y(!1)}const H=`<svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.57075 1.47649C9.91449 0.612003 11.0853 0.612004 11.429 1.47649L13.4578 6.57884C13.6028 6.94328 13.9304 7.19229 14.3065 7.22384L19.5726 7.66545C20.4648 7.74027 20.8266 8.90496 20.1468 9.51407L16.1347 13.1091C15.8481 13.3659 15.7229 13.7688 15.8104 14.1527L17.0362 19.528C17.2439 20.4387 16.2968 21.1586 15.5329 20.6706L11.0244 17.79C10.7024 17.5842 10.2974 17.5842 9.97535 17.79L5.46685 20.6706C4.70297 21.1586 3.75581 20.4387 3.96349 19.528L5.18928 14.1527C5.27684 13.7688 5.15168 13.3659 4.86511 13.1091L0.85291 9.51407C0.173129 8.90496 0.534915 7.74027 1.42714 7.66545L6.69322 7.22384C7.06936 7.19229 7.39702 6.94328 7.54193 6.57884L9.57075 1.47649Z"/>
</svg>
`,O=`<svg width="21" height="21" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M20.3928 8.27026L20.4725 8.53341C20.5381 8.73203 20.4829 8.95278 20.3329 9.0913L15.4863 13.4597L16.9223 20.007C16.9709 20.2162 16.8963 20.4359 16.7328 20.5649L16.5134 20.7228C16.4282 20.7933 16.3225 20.8304 16.2143 20.828C16.1229 20.83 16.033 20.8044 15.955 20.7543L10.5 17.2491L5.07494 20.7543C4.99694 20.8044 4.90697 20.83 4.81565 20.828C4.7074 20.8304 4.60169 20.7933 4.51648 20.7228L4.26716 20.5649C4.10366 20.4359 4.02906 20.2162 4.07768 20.007L5.51373 13.4597L0.677039 9.10183C0.519309 8.96412 0.459604 8.73725 0.527451 8.53341L0.637149 8.27026C0.695477 8.06228 0.870839 7.91505 1.07594 7.90184L7.44841 7.36501L9.89169 1.16508C9.96998 0.959183 10.1602 0.825329 10.3704 0.828242H10.6296C10.8379 0.823577 11.0261 0.958817 11.0983 1.16508L13.5815 7.36501L19.954 7.90184C20.1591 7.91505 20.3344 8.06228 20.3928 8.27026ZM14.6087 17.7333L13.4918 12.8071L17.1517 9.51235L12.3549 9.11235L10.5 4.41767V15.0912L14.6087 17.7333Z"/>
</svg>`,G=`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M6.51603 14.323L5.02603 20.775C4.97989 20.9704 4.99374 21.1751 5.06577 21.3625C5.1378 21.5499 5.26467 21.7112 5.4298 21.8253C5.59492 21.9395 5.79064 22.0012 5.99138 22.0024C6.19212 22.0036 6.38855 21.9442 6.55503 21.832L12 18.202L17.445 21.832C17.6154 21.9451 17.8162 22.0033 18.0207 21.9988C18.2251 21.9944 18.4232 21.9274 18.5884 21.8069C18.7536 21.6865 18.878 21.5183 18.9448 21.3251C19.0116 21.1318 19.0176 20.9228 18.962 20.726L17.133 14.326L21.669 10.244C21.8143 10.1132 21.9181 9.94266 21.9674 9.75351C22.0168 9.56436 22.0097 9.36488 21.9469 9.17974C21.8841 8.99461 21.7685 8.83193 21.6142 8.71183C21.46 8.59173 21.2739 8.51947 21.079 8.504L15.378 8.05L12.911 2.589C12.8324 2.41316 12.7045 2.26384 12.5428 2.15906C12.3812 2.05429 12.1927 1.99854 12 1.99854C11.8074 1.99854 11.6189 2.05429 11.4572 2.15906C11.2956 2.26384 11.1677 2.41316 11.089 2.589L8.62203 8.05L2.92103 8.503C2.72948 8.51818 2.54636 8.58821 2.39358 8.70473C2.2408 8.82125 2.12482 8.97932 2.05952 9.16003C1.99422 9.34074 1.98236 9.53644 2.02537 9.72371C2.06838 9.91098 2.16443 10.0819 2.30203 10.216L6.51603 14.323ZM9.36903 9.997C9.54752 9.98294 9.71895 9.92112 9.86533 9.81802C10.0117 9.71491 10.1277 9.57433 10.201 9.411L12 5.43L13.799 9.411C13.8724 9.57433 13.9883 9.71491 14.1347 9.81802C14.2811 9.92112 14.4525 9.98294 14.631 9.997L18.603 10.312L15.332 13.256C15.048 13.512 14.935 13.906 15.039 14.274L16.292 18.659L12.556 16.168C12.392 16.0579 12.199 15.9992 12.0015 15.9992C11.804 15.9992 11.611 16.0579 11.447 16.168L7.54303 18.771L8.59303 14.225C8.63153 14.0578 8.62636 13.8835 8.57802 13.7189C8.52969 13.5543 8.43981 13.4048 8.31703 13.285L5.27903 10.323L9.36903 9.997Z"/>
</svg>
`;class ce{constructor(){this.swiper=null,this.feedbacks=[],this.container=document.querySelector(".feedback-swiper"),this.wrapper=this.container.querySelector(".swiper-wrapper"),this.prevBtn=document.getElementById("prevBtn"),this.nextBtn=document.getElementById("nextBtn"),this.init()}init(){this.loadFeedbacks()}async loadFeedbacks(){try{this.showLoading();const t=await M.get("https://furniture-store.b.goit.study/api/feedbacks",{params:{limit:10,page:1}});this.feedbacks=t.data.feedbacks,this.renderFeedbacks(),this.initSwiper()}catch(t){console.error("Помилка завантаження відгуків:",t),this.showError()}}showLoading(){this.wrapper.innerHTML='<div class="loading">Завантаження відгуків...</div>'}showError(){this.wrapper.innerHTML='<div class="error">Помилка завантаження відгуків. Спробуйте пізніше.</div>'}roundRating(t){return t>=3.3&&t<=3.7?3.5:t>=3.8&&t<=4.2?4:Math.round(t*2)/2}generateStars(t){const n=this.roundRating(t);let o="";for(let r=1;r<=5;r++)r<=n?o+=H:r-.5===n?o+=O:o+=G;return o}renderFeedbacks(){this.wrapper.innerHTML=this.feedbacks.map(t=>`
          <div class="swiper-slide">
            <div class="feedback-card">
              <div class="star-rating">
                ${this.generateStars(t.rate)}
              </div>
              <div class="feedback-text">"${t.descr}"</div>
              <div class="feedback-author">${t.name}</div>
            </div>
          </div>
        `).join("")}initSwiper(){this.swiper=new A(this.container,{modules:[P,T],slidesPerView:1,slidesPerGroup:1,spaceBetween:0,loop:!1,grabCursor:!0,pagination:{el:".feedback-pagination",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},navigation:{nextEl:this.nextBtn,prevEl:this.prevBtn},breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1024:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}},on:{init:()=>this.updateNavigationButtons(),slideChange:()=>this.updateNavigationButtons(),reachBeginning:()=>this.updateNavigationButtons(),reachEnd:()=>this.updateNavigationButtons()}})}updateNavigationButtons(){this.swiper&&(this.swiper.isBeginning?(this.prevBtn.classList.add("disabled"),this.prevBtn.setAttribute("disabled","true")):(this.prevBtn.classList.remove("disabled"),this.prevBtn.removeAttribute("disabled")),this.swiper.isEnd?(this.nextBtn.classList.add("disabled"),this.nextBtn.setAttribute("disabled","true")):(this.nextBtn.classList.remove("disabled"),this.nextBtn.removeAttribute("disabled")))}}document.addEventListener("DOMContentLoaded",()=>{new ce});new J(".accordion-container",{duration:250,showMultiple:!1});const de="https://furniture-store.b.goit.study/api";async function ue(e){try{return(await M.post(`${de}/orders`,e,{headers:{"Content-Type":"application/json"}})).data}catch{f.error({message:"Сталася помилка, спробуйте ще раз",position:"topRight"})}}function pe(){s.orderModalBackdrop.classList.add("is-open"),document.body.style.overflow="hidden",s.orderModalCloseBtn.addEventListener("click",L),s.orderModalBackdrop.addEventListener("click",V),document.addEventListener("keydown",Z)}function fe(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}function me(e){const t=fe(e);let n="";for(let o=1;o<=5;o++)o<=t?n+=H:o-.5===t?n+=O:n+=G;return n}document.addEventListener("click",e=>{const t=e.target.closest(".details-btn");if(!t)return;const n=t.dataset.id,o=p.find(r=>r._id===n);o&&ge(o)});let I={id:"",color:""};function ge(e){I.id=e._id;const t=document.querySelector("[data-modal]"),n=e.images.map((r,a)=>`
    <li class="${a===0?"large":"small"}">
      <img class="gallery-images" src="${r}" alt="${e.name}-${a+1}">
    </li>
  `).join("");t.querySelector(".gallery-details").innerHTML=n,t.querySelector(".details-title").textContent=e.name,t.querySelector(".details-category").textContent=e.category.name,t.querySelector(".details-price").innerHTML=`${e.price} <span class="price-currency">грн</span>`,document.querySelector("#rating").innerHTML=me(e.rate);const o=e.color.map((r,a)=>`
    <li>
      <input class="color-checkbox visually-hidden" type="checkbox" id="color${a+1}" value="${r}">
      <label class="color-label" for="color${a+1}">
        <span class="modal-checkbox" style="background-color:${r}"></span>
      </label>
    </li>
  `).join("");t.querySelector(".color-options").innerHTML=o,t.querySelector(".details-description").textContent=e.description,t.querySelector(".details-size").textContent=e.sizes,t.classList.add("is-open"),document.body.style.overflow="hidden",he(),document.addEventListener("keydown",R),t.addEventListener("click",N),t.querySelector("[data-modal-close]").addEventListener("click",v)}function he(){const e=document.querySelectorAll(".color-checkbox");e.forEach(t=>{t.addEventListener("change",()=>{t.checked&&e.forEach(n=>{n!==t&&(n.checked=!1)})})})}document.querySelector(".modal-order-btn").addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(".color-checkbox:checked");if(!t){f.warning({title:"Увага",message:"Оберіть, будь ласка, колір",position:"center",timeout:2e3});return}I.color=t.value,v(),pe()});function v(){const e=document.querySelector("[data-modal]");e.classList.remove("is-open"),document.body.style.overflow="",document.removeEventListener("keydown",R),e.removeEventListener("click",N),e.querySelector("[data-modal-close]").removeEventListener("click",v)}function N(e){e.target.hasAttribute("data-modal")&&v()}function R(e){e.key==="Escape"&&v()}const D=document.getElementById("phone-input"),ye={mask:"+{38} (000) 000 00 00"},ve=X(D,ye),Le=document.querySelector(".submit-btn");s.orderFormEl.addEventListener("input",()=>{Le.disabled=!s.orderFormEl.checkValidity()});s.orderFormEl.addEventListener("submit",e=>be(e));async function be(e,t){if(e.preventDefault(),s.orderModalLoader.classList.remove("visually-hidden"),s.orderFormEl.classList.add("was-validated"),!s.orderFormEl.checkValidity()){f.error({message:"Будь ласка, заповніть всі обов’язкові поля.",position:"topRight"});return}ve.unmaskedValue.length!==12&&(e.preventDefault(),D.setCustomValidity("Будь ласка, введіть правильний телефон."),document.querySelector('.order-form-input[name="phone"]').classList.add("is-invalid"));const{id:o,color:r}=I,a={email:s.orderFormEl.email.value.trim(),phone:s.orderFormEl.phone.value.trim().replace(/\D/g,""),modelId:o,color:r,comment:s.orderFormEl.comment.value.trim()};try{await ue(a)&&(f.success({message:"Заявку успішно надіслано!",position:"topRight"}),L())}catch{f.error({message:"Сталася помилка, спробуйте ще раз",position:"topRight"});return}finally{s.orderModalLoader.classList.add("visually-hidden")}}function L(){s.orderModalBackdrop.classList.remove("is-open"),document.body.style.overflow="",s.orderFormEl.reset(),document.removeEventListener("keydown",Z),s.orderModalCloseBtn.removeEventListener("click",V),s.orderModalCloseBtn.removeEventListener("click",L)}function V(e){e.target.hasAttribute("data-modal")&&L()}function Z(e){e.key==="Escape"&&L()}document.addEventListener("DOMContentLoaded",()=>{let e=null;async function t(){try{const c=await h("/furnitures",{type:"popular"});if(!c||!Array.isArray(c.furnitures)||c.furnitures.length<3){console.warn("Недостатньо популярних товарів для відображення слайдера."),n();return}p.length=0,p.push(...c.furnitures),o(c.furnitures),r()}catch(i){console.error("Помилка при отриманні популярних товарів:",i),n()}}function n(){const i=document.getElementById("popular-products");i&&(i.style.display="none")}function o(i){const d=document.querySelector(".products-swiper .swiper-wrapper");if(!d){console.error("Контейнер .products-swiper .swiper-wrapper не знайдено.");return}const c=i.map(l=>{const _=(l==null?void 0:l.name)||"Без назви",U=typeof(l==null?void 0:l.price)=="number"?l.price:"—",z=(l==null?void 0:l._id)||"",W=Array.isArray(l==null?void 0:l.images)&&l.images[0]?l.images[0]:"placeholder.jpg",K=Array.isArray(l==null?void 0:l.color)?l.color.map(Q=>`<span class="color-dot" style="background-color: ${Q};"></span>`).join(""):"";return`
          <li class="swiper-slide product-card">
            
              <img src="${W}" alt="${_}" class="product-image">
              <div class="furniture-info">
              <h3 class="furniture-title">${_}</h3>
              <div class="product-colors">${K}</div>
              <p class="product-price">${U} грн</p>
              </div>
              <button class="details-btn" data-id="${z}">Детальніше</button>
          
          </li>
        `}).join("");d.innerHTML=c}function r(){if(!document.querySelector(".products-swiper")){console.error("Контейнер .products-swiper не знайдено.");return}e&&!e.destroyed&&e.destroy(!0,!0),e=new A(".products-swiper",{modules:[P,T],slidesPerView:1,spaceBetween:30,loop:!1,navigation:{nextEl:"#nextBtnPopular",prevEl:"#prevBtnPopular"},pagination:{el:".products-pagination",clickable:!0},breakpoints:{768:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:20}},on:{init:function(){a(this)},slideChange:function(){a(this)}}})}function a(i){const d=document.getElementById("prevBtnPopular"),c=document.getElementById("nextBtnPopular");!d||!c||(d.disabled=i.isBeginning,c.disabled=i.isEnd,d.classList.toggle("disabled",i.isBeginning),c.classList.toggle("disabled",i.isEnd))}t()});
//# sourceMappingURL=index.js.map
