import{a as M,i as k,S as I,N as _,P as x,A as S}from"./assets/vendor-BMd6maSA.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const A="/categories",v="/furnitures",p=8,C="https://furniture-store.b.goit.study/api";async function m(t,e={}){try{const{page:s=1,limit:a=p,...r}=e;return(await M(`${C}${t}`,{params:{page:s,limit:a,...r}})).data}catch{k.error({title:"",message:"Помилка виконання запиту. Спробуйте ще раз.",position:"topRight",timeout:2e3,close:!1,maxWidth:300,messageColor:"#fff",color:"#e23232"})}}const o={categoriesGallery:document.querySelector(".furniture-categories-list"),furnitureGallery:document.querySelector(".furniture-gallery"),showMoreBtn:document.querySelector(".show-more-button"),loader:document.getElementById("loader")},j={"66504a50a1b2c3d4e5f6a7b8":"Soft_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7b9":"Storage_systems_2x.jpg","66504a50a1b2c3d4e5f6a7ba":"Beds_2x.jpg","66504a50a1b2c3d4e5f6a7bb":"Tables_2x.jpg","66504a50a1b2c3d4e5f6a7bc":"Chairs_2x.jpg","66504a50a1b2c3d4e5f6a7bd":"Citchens_2x.jpg","66504a50a1b2c3d4e5f6a7be":"Children_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7bf":"Ofice_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c0":"Corridor_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c1":"Bathroom_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c2":"Garden_furniture_2x.jpg","66504a50a1b2c3d4e5f6a7c3":"Accessuars_2x.jpg"};let c=1,d=1,f="",g=!1,b=[];function P(t){const e=`
        <li class="category-item">   
            <div class="category-thumb all-categories-thumb" data-category-id="">
                <p class="category-title">Всі товари</p>
            </div>
        </li>
    `,s=t.map(({_id:a,name:r})=>{const i=`/img/${j[a]}`;return`
            <li class="category-item">   
                <div class="category-thumb" data-category-id="${a}" style="background-image: url('${i}')" >
                <p class="category-title">${r}</p>
                </div>
            </li>
                `}).join("");o.categoriesGallery.insertAdjacentHTML("beforeend",e+s)}function w(t){return t.map(({name:e,color:s,price:a,images:r})=>{const i=r[0]||"/img/All_products_2x.jpg",l=Array.isArray(s)?s.map(n=>`<span class="color-circle" style="background-color: ${n};"></span>`).join(""):`<span class="color-circle" style="background-color: ${s};"></span>`;return`
            <li class="gallery-item">   
                <img class="gallery-img" src="${i}" alt="${e}" />
                <h3 class="furniture-title">${e}</h3>
                <div class="furniture-colors">${l}</div>
                <p class="furniture-price">${a} грн</p>
                <div class="wrapper">
                    <button class="details-btn" type="button">Детальніше</button>
                </div>
            </li>`}).join("")}async function T(){try{c=1,g=!0,o.showMoreBtn.classList.add("visually-hidden"),B();const t=await m(v,L(c));o.furnitureGallery.innerHTML=w(t.furnitures),b.length=0,b.push(...t.furnitures),d=Math.ceil((t.totalItems??0)/p),d>c&&o.showMoreBtn.classList.remove("visually-hidden")}catch(t){alert("Помилка завантаження меблів:",t.message)}finally{E(),g=!1}}async function G(){if(!g){if(c>=d){o.showMoreBtn.classList.add("visually-hidden");return}g=!0,o.showMoreBtn.disabled=!0,B();try{const t=c+1,e=await m(v,L(t));o.furnitureGallery.insertAdjacentHTML("beforeend",w(e.furnitures)),b.push(...e.furnitures),c=t,c>=d&&o.showMoreBtn.classList.add("visually-hidden")}catch(t){alert("Помилка при завантаженні наступної сторінки:",t.message)}finally{E(),o.showMoreBtn.disabled=!1,g=!1}}}function L(t){const e={page:t,limit:p};return f&&(e.category=f),e}async function $(t){const e=t.target.closest(".category-thumb");if(!e)return;const s=e.dataset.categoryId??"";s===f&&c===1||(document.querySelectorAll(".category-thumb.active").forEach(a=>a.classList.remove("active")),e.classList.add("active"),f=s,await N())}async function N(){try{c=1,o.showMoreBtn.classList.add("visually-hidden"),o.furnitureGallery.innerHTML="",B();const t=await m(v,L(c));o.furnitureGallery.innerHTML=w(t.furnitures),d=Math.ceil((t.totalItems??0)/p)||(t.totalPages??1),d>1&&o.showMoreBtn.classList.remove("visually-hidden")}catch(t){alert("Помилка перезавантаження першої сторінки:",t.message)}finally{E()}}function B(){var t,e;(t=o.loader)==null||t.classList.remove("hidden"),(e=o.loader)==null||e.setAttribute("aria-hidden","false")}function E(){var t,e;(t=o.loader)==null||t.classList.add("hidden"),(e=o.loader)==null||e.setAttribute("aria-hidden","true")}m(A,{page:1,limit:100}).then(t=>{P(t),o.categoriesGallery.addEventListener("click",$)}).catch(t=>{alert(t.message)});T().catch(t=>{alert(t.message)});o.showMoreBtn.addEventListener("click",G);document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("burger"),e=document.getElementById("mobileMenu"),s=document.getElementById("closeMenu"),a=document.body,r=document.querySelector(".menu-toggle-buttons"),i=(n=!0)=>{e.classList.toggle("active",n),a.classList.toggle("menu-open",n),n?(t.style.display="none",s.style.display="flex"):(t.style.display="flex",s.style.display="none")};t==null||t.addEventListener("click",()=>i(!0)),s==null||s.addEventListener("click",()=>i(!1)),document.addEventListener("click",n=>{const u=e.contains(n.target),h=r.contains(n.target);e.classList.contains("active")&&!u&&!h&&i(!1)}),document.addEventListener("keydown",n=>{n.key==="Escape"&&(e!=null&&e.classList.contains("active"))&&i(!1)}),document.querySelectorAll(".mobile-nav-link, .mobile-cta-button").forEach(n=>{n.addEventListener("click",()=>i(!1))}),document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",u=>{u.preventDefault();const h=n.getAttribute("href").substring(1),y=document.getElementById(h);y==null||y.scrollIntoView({behavior:"smooth",block:"start"})})}),[document.getElementById("logo"),document.getElementById("mobileLogo")].forEach(n=>{n==null||n.addEventListener("click",u=>{u.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})})});class O{constructor(){this.swiper=null,this.feedbacks=[],this.init()}init(){this.loadFeedbacks()}async loadFeedbacks(){try{this.showLoading();const e=await M.get("https://furniture-store.b.goit.study/api/feedbacks",{params:{limit:10,page:1}});this.feedbacks=e.data.feedbacks,this.renderFeedbacks(),this.initSwiper()}catch(e){console.error("Помилка завантаження відгуків:",e),this.showError()}}showLoading(){const e=document.querySelector(".swiper-wrapper");e.innerHTML='<div class="loading">Завантаження відгуків...</div>'}showError(){const e=document.querySelector(".swiper-wrapper");e.innerHTML='<div class="error">Помилка завантаження відгуків. Спробуйте пізніше.</div>'}roundRating(e){return e>=3.3&&e<=3.7?3.5:e>=3.8&&e<=4.2?4:Math.round(e*2)/2}generateStars(e){const s=this.roundRating(e);let a="";for(let r=1;r<=5;r++)r<=s?a+='<svg class="star" width="23" height="23"><use href="../img/svg/icon.svg#star-full"></use></svg>':r-.5===s?a+='<svg class="star" width="24" height="24"><use href="../img/svg/icon.svg#half-star"></use></svg>':a+='<svg class="star" width="23" height="23"><use href="../img/svg/icon.svg#star-empty"></use></svg>';return a}renderFeedbacks(){const e=document.querySelector(".swiper-wrapper"),s=this.feedbacks.map(a=>`
            <div class="swiper-slide">
                <div class="feedback-card">
                    <div class="star-rating">
                        ${this.generateStars(a.rate)}
                    </div>
                    <div class="feedback-text">"${a.descr}"</div>
                    <div class="feedback-author">${a.name}</div>
                </div>
            </div>
        `).join("");e.innerHTML=s}initSwiper(){const e=document.getElementById("prevBtn"),s=document.getElementById("nextBtn");this.swiper=new I(".feedback-swiper",{modules:[_,x],slidesPerView:1,slidesPerGroup:1,spaceBetween:0,loop:!1,grabCursor:!0,pagination:{el:".feedback-pagination",clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active"},navigation:{nextEl:s,prevEl:e},breakpoints:{768:{slidesPerView:2,slidesPerGroup:2,spaceBetween:24},1024:{slidesPerView:3,slidesPerGroup:3,spaceBetween:24}},on:{slideChange:()=>{this.updateNavigationButtons()},reachBeginning:()=>{this.updateNavigationButtons()},reachEnd:()=>{this.updateNavigationButtons()}}}),this.updateNavigationButtons()}updateNavigationButtons(){const e=document.getElementById("prevBtn"),s=document.getElementById("nextBtn");this.swiper.isBeginning?(e.classList.add("disabled"),e.setAttribute("disabled","true")):(e.classList.remove("disabled"),e.removeAttribute("disabled")),this.swiper.isEnd?(s.classList.add("disabled"),s.setAttribute("disabled","true")):(s.classList.remove("disabled"),s.removeAttribute("disabled"))}}document.addEventListener("DOMContentLoaded",()=>{new O});new S(".accordion-container",{duration:250,showMultiple:!1});
//# sourceMappingURL=index.js.map
